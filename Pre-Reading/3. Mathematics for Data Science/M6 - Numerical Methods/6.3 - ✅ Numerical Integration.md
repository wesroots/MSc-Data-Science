---
Ex. Completed: false
tags:
  - maths
Links:
  - "[[2.2 - âœ… Integration]]"
---
> [!note] Topic Overview
> - Numerical integration exists because many integrals cannot be solved exactly with formulae. Even when they exist, they may be too complicated to use in practice
> - Common NI rules include trapezoidal and Simpson's
> - Accuracy of compound rules depends upon $n$ and thus $h$
> - Data Science
> 	- Areas under curves to measure total quantities
> 	- Expectations - integrals often require numerical approximation
> 	- Probabilities - PDF, CDF
> 

# Introduction
## Why Approximate Integrals?
- Some functions have no closed-form anti-derivative (e.g., $e^{-x^2}$, used in probability theory)
- Data often comes as discrete points (from experiments, simulations, or datasets), not neat functions. We cannot integrate data with exact algebra and formulae, only approximate
- Computation is faster and practical: approximations can get "close enough" with controllable error
## Connection to Data Science
### Areas under curves
- Integrals measure total quantities
- E.g., area under a probability density function equals 1
### Expectations (means)
- Expected value of a random variable $X$ with PDF $f(x)$ is
 $$
E[X] = \int xf(x)fx
$$
- In practice, this often requires numerical approximation
### Probabilities
- Probability of an event between two values is an integral of the PDF over that range
$$
P(a\leq X \leq b) = \int_a^b f(x)dx
$$

# Basic Rules
>[!note] Note
>Two most common numerical integration rules - replace curve with simple shapes to compute area
>- For these basic rules, intervals have to be equal in width
## Trapezoidal Rule
Approximate each slice of the curve between two points with a straight line, the area under it is a trapezoid
![[Pasted image 20250927092007.png]]
## Simpson's Rule
Approximate each slice of the curve with a straight line that passes through three points
![[Pasted image 20250927092014.png]]
# Error Analysis
## Order of accuracy for trapezoidal and Simpson's rules
### Trapezoidal rule
- Error shrinks like $1/n^2$ where $n$ = number of subintervals
	- "If you double no. of intervals, error shrinks about 4x"
- More precisely, $\text{error} \propto h^2$ where $h = \tfrac{b-a}{n}$
	- $h$ -> step size (how wide each interval is)
	- $b-a$ -> width of whole integration area
	- $n$ -> number of intervals
	- $\text{error} \propto h^2$ -> error is proportional to the square of the step size
		- Smaller step size (more intervals) -> smaller error
### Simpson's rule
- Error shrinks faster, like $1/n^4$
- I.e., $\propto h^4$ - fourth order accuracy

# Composite Rules
## Definition
Composite rules = repeating the basic trapezoid/Simpson idea across many small subintervals instead of one big one
### Why
- One trapezoid or parabola only works well if the curve is nearly straight or quadratic on the whole interval
	- Real curves aren't - so accuracy is poor
### How
- Split $[a,b]$ into $n$ smaller pieces of width $h=\tfrac{b-a}{n}$
- Apply rules one each sub-interval
- Sum them

# Data Science Link
### Probability and statistics
- Compute areas under PDFs
- Approximate CDFs
- Expectation $\mathbb{E}[X]\int xf(x)dx$ 
### ML
- Loss functions - integrals in continuous models
- Normalisation constants in probabilistic models (e.g., Bayesian)
### Finance
- Pricing derivatives by integrating payoff functions against probability distributions
